<!doctype html>

<body>
    <canvas id="gameCanvas" width="600" height="600">
    </canvas>
    <script>
        var canvas, canvasContext;

        window.onload = function() {
            canvas = document.getElementById('gameCanvas');
            canvasContext = canvas.getContext('2d');

            document.addEventListener('keydown', keyPressed);
            document.addEventListener('keyup', keyReleased);
            
         

            setInterval(mainloop, 1000 / 50);

        }
        
        //bullet
        var bulletXpos = 0;
        var bulletYpos = 0;
        const BULLET_WIDTH = 4;
        const BULLET_HIGHT = 6;
        var bulletYspeed = 10;

        var playerXpos = 290;
        var playerYpos = 500;
        const PlAYER_SIZE = 20;
        var playerXspeed = 5;
        var playerYspeed = 5;
        
        var score = 0;
        
//        var enemy1Xpos = 1;
//        var enemy1Ypos = 1;
//        const ENEMY1_SIZE = 20;
//        var enemy1Xspeed= 5;
//        var enemy1Yspeed= 5;
//        

        const LEFT_KEY = 65;
        const RIGHT_KEY = 68;
        
        const SPACE_KEY = 32;

        var leftkeyPressed = false;
        var rightkeyPressed = false;
        
        var startingPos = true;
        
        var totalEnemies = 10;
        

        function mainloop() { //mainloop were you want stuff on screen.

            colorRect(0,0,canvas.width, canvas.height, 'black'); // background that youll be palying on
            
            if(startingPos){
                for(var i = 0; i < totalEnemies; i++){
                    makeEnemy();
                }
                startingPos = false;
            }

            colorRect(playerXpos, playerYpos, PlAYER_SIZE, PlAYER_SIZE, 'red');//the charcter youll be playing in the game
            colorRect(bulletXpos, bulletYpos, BULLET_WIDTH, BULLET_HIGHT, 'white');// bullet

            if (startingPos) {
                startPos();
                console.log('here')
                startingPos = false;
            }
            playerMove();
            bulletshoot();
        } // end func

        function keyPressed(evt) {

            if (evt.keyCode == LEFT_KEY) {
                leftkeyPressed = true;
            }
            if (evt.keyCode == RIGHT_KEY) {
                rightkeyPressed = true;
            }
            if (evt.keyCode == SPACE_KEY){
                shooting = true;
            }
        } //end func

        function keyReleased(evt) {
            if (evt.keyCode == LEFT_KEY) {
                leftkeyPressed = false;
            }
            if (evt.keyCode == RIGHT_KEY) {
                rightkeyPressed = false;
            }
        } //end func
        
            

        function playerMove() {//player 
            if (rightkeyPressed) { // rightkeypressed 
                playerXpos += playerXspeed;
            }
            if (leftkeyPressed) { // leftkeyPressed 
                playerXpos -= playerXspeed;
            }

        } // end func
        
        var enemies = [];
        
        function makeEnemy(){
            var ENEMY_SIZE = Math.floor(Math.random()*(40 - 10)) + 10;
            var enemyXpos = Math.floor(Math.random()*(canvas.width - ENEMY_SIZE));
            var enemyYpos = 0;
            var enemyXspeed = 5;
            var enemyYspeed = 5;

            var enemy = {
                enemyXpos: enemyXpos,
                enemyYpos: enemyYpos,
                ENEMY_SIZE: ENEMY_SIZE,
                enemyXspeed: enemyXspeed,
                enemyYspeed: enemyYspeed
            }    
            
            enemies.push(enemy);
            
        }    
        
        var shooting = false;
        var shot = false;
        
        function bulletshoot(){
            if(shooting && shot == false){
               bulletXpos = playerXpos + PlAYER_SIZE / 2 - BULLET_WIDTH / 2; // x center
               bulletYpos = playerYpos;
               shot = true
                
               }
            if (shooting && shot){
                 bulletYpos -= bulletYspeed
                
                }
            if (bulletYpos < 0){
                 shot = false;
                 shooting =false
            }
            if(shot == false && shooting == false){
                 bulletXpos = 0;
                 bulletYpos = 0;
               }
        }

        function startPos() {
            playerXpos = canvas.width / 2 - PlAYER_SIZE / 2;
            playerYpos = canvas.height * 0.8;
        }

        function colorRect(x, y, w, h, c) {
            canvasContext.fillStyle = c;
            canvasContext.fillRect(x, y, w, h);
        }

    </script>
</body>
